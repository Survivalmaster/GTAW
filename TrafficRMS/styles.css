:root{
  --bg: #0f1420;
  --surface: #141a29;
  --surface-2: #1a2236;
  --text: #e8edf7;
  --muted: #9aa4ba;
  --accent: #2f7de1;
  --accent-2: #1f5fb0;
  --success:#2fb16b;
  --warn:#e1a52f;
  --danger:#e14343;
  --ring: 0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent);
  font-synthesis-weight:none;
}
[data-theme="light"]{
  --bg:#f3f6fb; --surface:#ffffff; --surface-2:#eef2f8;
  --text:#172033; --muted:#5a6a85;
}

*{box-sizing:border-box}
html,body,#app{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 14px/1.45 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

#app{display:grid; grid-template-columns: 280px 1fr; min-height:100vh}

/* Sidebar */
.sidebar{
  background:linear-gradient(180deg, var(--surface) 0%, var(--surface-2) 100%);
  border-right:1px solid color-mix(in oklab, var(--surface-2) 60%, black);
  display:flex; flex-direction:column; padding:16px; gap:12px;
}
.brand{display:flex; align-items:center; gap:12px; padding:8px 4px 16px;}
.brand-mark{width:36px; height:36px; display:grid; place-items:center; background:var(--accent); color:white; border-radius:10px; font-size:18px}
.brand-text{display:flex; flex-direction:column}
.brand-text .dept{font-weight:700; letter-spacing:.5px}
.brand-text .suite{font-size:12px; color:var(--muted)}

.nav{display:flex; flex-direction:column; gap:6px}
.nav-section-label{margin:12px 6px 4px; font-size:11px; text-transform:uppercase; letter-spacing:.08em; color:var(--muted)}
.nav-item{
  appearance:none; border:0; background:transparent; color:var(--text);
  padding:10px 12px; border-radius:10px; display:flex; align-items:center; gap:10px;
  text-align:left; cursor:pointer;
}
.nav-item:hover{background:color-mix(in oklab, var(--accent) 18%, transparent)}
.nav-item.active{background:color-mix(in oklab, var(--accent) 26%, transparent); outline: var(--ring)}
.nav-item.subtle{color:var(--muted)}
.nav-item .icon{width:18px; text-align:center}

.sidebar-footer{margin-top:auto; display:flex; flex-direction:column; gap:6px}
.build{font-size:11px; color:var(--muted); padding:6px}

/* Main */
.main{display:flex; flex-direction:column; min-width:0}
.topbar{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:16px; background:var(--surface); border-bottom:1px solid color-mix(in oklab, var(--surface-2) 60%, black);
}
.view{padding:16px; display:block}
.view-title{margin:0; font-size:18px; font-weight:650}
.grid{display:grid; gap:12px; grid-template-columns: repeat(12, 1fr)}
.grid > *{grid-column: span 12}
@media (min-width: 900px){
  .grid > .kpi{grid-column: span 4}
}

.card{
  background:var(--surface); border:1px solid color-mix(in oklab, white 5%, var(--surface-2));
  border-radius:14px; padding:12px;
  box-shadow: 0 1px 0 rgba(0,0,0,.2), 0 12px 24px rgba(0,0,0,.12);
}
.card-header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:4px 4px 12px}
.kpi{display:flex; flex-direction:column; gap:6px; padding:14px}
.kpi-label{color:var(--muted); font-size:12px}
.kpi-value{font-size:28px; font-weight:700}

.table-wrap{overflow:auto; border-radius:10px; border:1px solid color-mix(in oklab, white 6%, var(--surface-2))}
.table{border-collapse:separate; border-spacing:0; width:100%; min-width:760px}
.table th, .table td{padding:10px 12px; border-bottom:1px solid color-mix(in oklab, white 6%, var(--surface-2))}
.table th{text-align:left; font-weight:600; font-size:12px; color:var(--muted)}
.table tr:last-child td{border-bottom:0}
.status{padding:4px 8px; border-radius:999px; font-size:12px}
.status.Open{background:color-mix(in oklab, var(--accent) 14%, transparent)}
.status.Pending\ Follow-up{background:color-mix(in oklab, var(--warn) 22%, transparent)}
.status.Closed{background:color-mix(in oklab, var(--success) 18%, transparent)}

/* Controls */
.input{
  width:100%; background:var(--surface-2); color:var(--text);
  border:1px solid color-mix(in oklab, white 6%, var(--surface-2));
  border-radius:10px; padding:10px 12px; outline:none;
}
.input:focus{box-shadow: var(--ring); border-color: var(--accent)}
.btn{
  appearance:none; border:1px solid color-mix(in oklab, white 6%, var(--surface-2));
  background:var(--surface-2); color:var(--text); padding:10px 12px; border-radius:10px; cursor:pointer;
}
.btn:hover{filter:brightness(1.05)}
.btn.primary{background:var(--accent); border-color:var(--accent-2)}
.btn.subtle{background:transparent; border-color:transparent; color:var(--muted)}
.cluster{display:flex; gap:8px; align-items:center; flex-wrap:wrap}

/* Routes */
.route{display:none}
.route.active{display:block}

/* Modals */
.modal{border:0; padding:0; background:transparent}
.modal::backdrop{background:rgba(0,0,0,.5)}
.modal-card{
  width:min(760px, calc(100vw - 24px));
  background:var(--surface); border:1px solid color-mix(in oklab, white 6%, var(--surface-2));
  border-radius:14px; overflow:hidden;
}
.modal-header{padding:14px 16px; border-bottom:1px solid color-mix(in oklab, white 6%, var(--surface-2))}
.modal-body{padding:16px}
.modal-footer{display:flex; justify-content:flex-end; gap:8px; padding:12px 16px; border-top:1px solid color-mix(in oklab, white 6%, var(--surface-2))}

/* A11y helpers */
.checkbox{display:flex; align-items:center; gap:8px; user-select:none}
