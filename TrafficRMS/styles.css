:root{
  /* Enterprise dark palette */
  --bg: #0b0f16;
  --surface: #111722;
  --surface-2: #171f2d;
  --line: #2a3446;
  --text: #e6ebf2;
  --muted: #9aa4b4;
  --accent: #2b74c7;     /* restrained accent */
  --accent-2: #1c4e86;
}
[data-theme="light"]{
  --bg:#f5f6f8; --surface:#ffffff; --surface-2:#f1f3f6;
  --line:#d9dee6; --text:#111827; --muted:#667085; --accent:#1e5aa6; --accent-2:#17447c;
}

*{box-sizing:border-box}
html,body,#app{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  text-rendering: optimizeLegibility;
}

/* Layout */
.layout{display:grid; grid-template-columns: 260px 1fr; min-height:100vh}

/* Sidebar */
.sidebar{
  background: var(--surface);
  border-right:1px solid var(--line);
  display:flex; flex-direction:column; min-height:100%; padding:16px;
}
.brand{padding:4px 2px 18px}
.brand-block{display:flex; flex-direction:column; gap:2px}
.brand-title{font-weight:700; letter-spacing:.4px}
.brand-sub{font-size:12px; color:var(--muted)}

.nav{display:flex; flex-direction:column; gap:4px}
.nav-section{margin:12px 4px 6px; font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:.08em}
.nav-item{
  appearance:none; border:0; background:transparent; color:var(--text);
  padding:8px 10px; border-radius:4px; text-align:left; cursor:pointer;
}
.nav-item:hover{background:var(--surface-2)}
.nav-item.active{background:var(--surface-2); outline:1px solid var(--line)}

.sidebar-footer{margin-top:auto; display:flex; gap:8px; align-items:center; justify-content:space-between}
.build{font-size:11px; color:var(--muted)}
.link{background:none; border:0; color:var(--muted); cursor:pointer; padding:0}
.link:hover{color:var(--text)}

/* Main / Topbar */
.main{display:flex; flex-direction:column; min-width:0}
.topbar{
  position:sticky; top:0; z-index:5; background:var(--surface);
  border-bottom:1px solid var(--line);
  display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px;
}
.h1{margin:0; font-size:18px; font-weight:650}
.h2{margin:0; font-size:16px; font-weight:600}
.h3{margin:0; font-size:15px; font-weight:600}
.sub{color:var(--muted); font-size:12px; margin-top:2px}
.topbar-right{display:flex; align-items:center; gap:16px}
.toolbar{display:flex; gap:8px; align-items:center}
.split{display:flex; gap:6px}
.user-chip{display:flex; gap:8px; align-items:center; color:var(--muted); font-size:12px}
.user-unit{background:var(--surface-2); border:1px solid var(--line); padding:2px 6px; border-radius:4px}
.view{padding:16px}

/* Panels / KPIs */
.kpi-row{display:grid; grid-template-columns:repeat(3, 1fr); gap:8px; margin-bottom:12px}
.kpi{border:1px solid var(--line); background:var(--surface); border-radius:4px; padding:12px}
.kpi-label{color:var(--muted); font-size:12px}
.kpi-value{font-size:24px; font-weight:650}

/* Panel */
.panel{border:1px solid var(--line); background:var(--surface); border-radius:4px; overflow:hidden}
.panel-head{display:flex; align-items:center; gap:12px; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--line)}
.toolrow{display:flex; align-items:center; gap:8px}
.lbl{font-size:12px; color:var(--muted)}
.spacer{flex:1}

/* Controls */
.input{
  width:100%; background:var(--surface-2); color:var(--text);
  border:1px solid var(--line); border-radius:4px; padding:8px 10px; outline:none;
}
.input:focus{border-color:var(--accent)}
.input.sm{padding:6px 8px; font-size:13px}
.btn{
  appearance:none; border:1px solid var(--line);
  background:var(--surface-2); color:var(--text);
  padding:8px 10px; border-radius:4px; cursor:pointer;
}
.btn:hover{filter:brightness(1.04)}
.btn.primary{background:var(--accent); border-color:var(--accent-2)}
.btn.linklike{border-color:transparent; background:transparent; color:var(--accent); padding:0 2px}
.btn.linklike:hover{text-decoration:underline}

/* Tables */
.table-wrap{overflow:auto}
.table{border-collapse:collapse; width:100%; min-width:820px}
.table thead th{
  text-align:left; font-weight:600; font-size:12px; color:var(--muted);
  background:var(--surface-2);
  border-bottom:1px solid var(--line); padding:8px 10px;
}
.table td{border-bottom:1px solid var(--line); padding:8px 10px; vertical-align:top}
.table tr:hover td{background:rgba(255,255,255,.02)}
.table.dense td,.table.dense th{padding:6px 8px}

/* Status chips */
.status{padding:2px 6px; border-radius:3px; border:1px solid var(--line); font-size:12px}
.status.Open{background:rgba(43,116,199,.1); border-color:rgba(43,116,199,.35)}
.status.Pending\ Follow-up{background:rgba(225,165,47,.1); border-color:rgba(225,165,47,.4)}
.status.Closed{background:rgba(47,177,107,.12); border-color:rgba(47,177,107,.4)}

/* Forms */
.form-row{display:grid; grid-template-columns: 2fr 1fr 1fr auto; gap:8px; padding:12px}
.form-grid{display:grid; grid-template-columns:1fr 1fr; gap:8px}
.form-grid textarea{grid-column:1/-1}
.chk{display:flex; gap:8px; align-items:center; font-size:13px}

/* Routes */
.route{display:none}
.route.active{display:block}

/* Modals */
.modal{border:0; padding:0; background:transparent}
.modal::backdrop{background:rgba(0,0,0,.6)}
.modal-card{width:min(720px, calc(100vw - 24px)); background:var(--surface); border:1px solid var(--line); border-radius:4px; overflow:hidden}
.modal-header{padding:12px; border-bottom:1px solid var(--line)}
.modal-body{padding:12px}
.modal-footer{display:flex; justify-content:flex-end; gap:8px; padding:10px 12px; border-top:1px solid var(--line)}
