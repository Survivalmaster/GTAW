<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSPD • Traffic RMS</title>
  <!-- System fonts only (no webfonts) -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app" class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Primary">
      <div class="brand">
        <div class="brand-block">
          <span class="brand-title">LSPD</span>
          <span class="brand-sub">Traffic RMS</span>
        </div>
      </div>

      <nav class="nav" aria-label="Main">
        <button class="nav-item active" data-route="dashboard" aria-current="page">
          <span>Dashboard</span>
        </button>

        <div class="nav-section">Create</div>
        <button class="nav-item" data-open-modal="collision"><span>Traffic Collision (Case)</span></button>
        <button class="nav-item" data-open-modal="tstop"><span>Traffic Stop Report</span></button>
        <button class="nav-item" data-open-modal="citation"><span>Citation</span></button>
        <button class="nav-item" data-open-modal="dui"><span>DUI Report</span></button>

        <div class="nav-section">Browse</div>
        <button class="nav-item" data-route="cases"><span>Cases</span></button>
        <button class="nav-item" data-route="reports"><span>Reports</span></button>
        <button class="nav-item" data-route="search"><span>Search</span></button>
      </nav>

      <div class="sidebar-footer">
        <div class="build">Build: TD-1.0</div>
        <button class="link" id="toggleTheme">Toggle Theme</button>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="topbar">
        <div class="topbar-left">
          <h1 id="viewTitle" class="h1">Dashboard</h1>
          <div class="sub">
            Division: Traffic • System Time: <span id="systemClock">—</span>
          </div>
        </div>
        <div class="topbar-right">
          <div class="toolbar">
            <input id="quickSearch" class="input sm" type="search" placeholder="Quick search: Name / Plate / Case ID" aria-label="Quick search">
            <div class="split">
              <button class="btn primary" data-open-modal="collision">New Collision (Case)</button>
              <button class="btn" data-open-modal="tstop">Traffic Stop</button>
              <button class="btn" data-open-modal="citation">Citation</button>
              <button class="btn" data-open-modal="dui">DUI</button>
            </div>
          </div>
          <div class="user-chip" title="Signed in">
            <span class="user-unit">TD</span>
            <span class="user-name">Officer —</span>
          </div>
        </div>
      </header>

      <section id="view" class="view">
        <!-- Dashboard -->
        <div data-view="dashboard" class="route active">
          <div class="kpi-row">
            <div class="kpi">
              <div class="kpi-label">Open Cases</div>
              <div class="kpi-value" id="kpiOpenCases">0</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Reports (24h)</div>
              <div class="kpi-value" id="kpiReports24h">0</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Pending Follow-ups</div>
              <div class="kpi-value" id="kpiFollowups">0</div>
            </div>
          </div>

          <section class="panel">
            <header class="panel-head">
              <h2 class="h2">Recent Activity</h2>
              <button class="btn linklike" data-route="cases">View cases</button>
            </header>
            <div class="table-wrap">
              <table class="table dense" id="recentTable" aria-label="Recent activity">
                <thead>
                  <tr>
                    <th>Type</th><th>ID</th><th>Title</th><th>Officer</th><th>Status</th><th>Created</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>

        <!-- Cases -->
        <div data-view="cases" class="route">
          <section class="panel">
            <header class="panel-head">
              <h2 class="h2">Cases</h2>
              <div class="toolrow">
                <label class="lbl">Status</label>
                <select id="caseFilter" class="input sm">
                  <option value="">All</option>
                  <option>Open</option>
                  <option>Pending Follow-up</option>
                  <option>Closed</option>
                </select>
                <div class="spacer"></div>
                <button class="btn primary" data-open-modal="collision">New Case (Collision)</button>
              </div>
            </header>
            <div class="table-wrap">
              <table class="table dense" id="casesTable" aria-label="Cases">
                <thead>
                  <tr>
                    <th>Case ID</th><th>Primary Report</th><th>Officer</th><th>Status</th><th>Involved</th><th>Created</th><th></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>

        <!-- Reports -->
        <div data-view="reports" class="route">
          <section class="panel">
            <header class="panel-head">
              <h2 class="h2">Reports</h2>
              <div class="toolrow">
                <label class="lbl">Type</label>
                <select id="reportTypeFilter" class="input sm">
                  <option value="">All</option>
                  <option>Traffic Collision</option>
                  <option>Traffic Stop</option>
                  <option>Citation</option>
                  <option>DUI</option>
                </select>
              </div>
            </header>
            <div class="table-wrap">
              <table class="table dense" id="reportsTable" aria-label="Reports">
                <thead>
                  <tr>
                    <th>Type</th><th>Report ID</th><th>Case</th><th>Officer</th><th>Subject / Plate</th><th>Created</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>

        <!-- Search -->
        <div data-view="search" class="route">
          <section class="panel">
            <header class="panel-head">
              <h2 class="h2">Search</h2>
            </header>
            <form class="form-row" id="advSearchForm">
              <input class="input" name="q" placeholder="Name / Plate / Case / Report" />
              <select class="input" name="type">
                <option value="">Any Type</option>
                <option>Traffic Collision</option>
                <option>Traffic Stop</option>
                <option>Citation</option>
                <option>DUI</option>
              </select>
              <select class="input" name="status">
                <option value="">Any Status</option>
                <option>Open</option>
                <option>Pending Follow-up</option>
                <option>Closed</option>
              </select>
              <button class="btn">Search</button>
            </form>
            <div class="table-wrap">
              <table class="table dense" id="searchTable" aria-label="Search results">
                <thead>
                  <tr>
                    <th>Type</th><th>ID</th><th>Title</th><th>Officer</th><th>Status</th><th>Created</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>
      </section>
    </main>
  </div>

  <!-- Modals -->
  <dialog id="modal-collision" class="modal">
    <form method="dialog" class="modal-card" id="formCollision">
      <header class="modal-header">
        <h3 class="h3">New Traffic Collision — Creates Case</h3>
      </header>
      <div class="modal-body">
        <div class="form-grid">
          <input class="input" name="officer" placeholder="Officer Name / Badge" required />
          <input class="input" name="location" placeholder="Location" required />
          <input class="input" name="plateA" placeholder="Vehicle Plate A (if any)" />
          <input class="input" name="plateB" placeholder="Vehicle Plate B (if any)" />
          <textarea class="input" name="summary" placeholder="Summary" rows="3" required></textarea>
          <label class="chk">
            <input type="checkbox" name="needsFollowup" />
            <span>Mark Case as “Pending Follow-up”</span>
          </label>
        </div>
      </div>
      <footer class="modal-footer">
        <button class="btn" value="cancel">Cancel</button>
        <button class="btn primary" value="submit">Create Case</button>
      </footer>
    </form>
  </dialog>

  <dialog id="modal-tstop" class="modal">
    <form method="dialog" class="modal-card" id="formTStop">
      <header class="modal-header">
        <h3 class="h3">New Traffic Stop Report</h3>
      </header>
      <div class="modal-body">
        <div class="form-grid">
          <input class="input" name="officer" placeholder="Officer Name / Badge" required />
          <input class="input" name="plate" placeholder="Plate" required />
          <input class="input" name="reason" placeholder="Stop Reason" required />
          <textarea class="input" name="notes" placeholder="Notes" rows="3"></textarea>
        </div>
      </div>
      <footer class="modal-footer">
        <button class="btn" value="cancel">Cancel</button>
        <button class="btn primary" value="submit">Save Report</button>
      </footer>
    </form>
  </dialog>

  <dialog id="modal-generic" class="modal">
    <form method="dialog" class="modal-card" id="formGeneric">
      <header class="modal-header">
        <h3 class="h3" id="genericTitle">New Report</h3>
      </header>
      <div class="modal-body">
        <div class="form-grid">
          <input class="input" name="officer" placeholder="Officer Name / Badge" required />
          <input class="input" name="subject" placeholder="Subject / Plate" required />
          <textarea class="input" name="notes" placeholder="Notes" rows="3"></textarea>
        </div>
      </div>
      <footer class="modal-footer">
        <button class="btn" value="cancel">Cancel</button>
        <button class="btn primary" value="submit">Save</button>
      </footer>
    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
